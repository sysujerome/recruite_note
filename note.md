[toc]

#### 拜占庭协议：保证忠诚将军行动一致性

分布式共识问题，保证所有将军的行动一致性，而不保证行动的内容。

口信消息型：在(n-1)/3以内的将军进行叛变，全部忠诚将军还是可以达成共识。

签名消息型：每个将军在发送指令的过程中会对消息进行MD5和RSA进行加密和验证，叛变者不能更改别人的指令，(n-2)以内的将军进行叛变，忠诚将军还是可以保持一致。



#### paxos协议：确定不变量取值

两种身份：proposal和acceptor

##### 方案一：

只有一个acceptor，加锁访问确定var

##### 方案2.1

只有一个acceptor，增加epoch，更高epoch优先级更高，后者认同前者。

##### 方案2.2

多个acceptor，采取半数以上的acceptor认同机制。



#### raft协议：选取主节点

三种身份：leader、follower、candidate

leader通过心跳机制定时向follower发送信号，如果隔一段时间没收到就开始转为candidate，cadidate进行投票，得票最高者成为新的leader，如果票数相同则隔不同的时间重新选举。



#### 红黑树

##### 性质

1. 节点的颜色分为红色和黑色
2. 根节点是黑色
3. 两个相邻的节点（父子）不能同时为红色
4. **任意一结点到每个叶子结点的路径都包含数量相同的黑结点。**

##### 插入

1. 如果树是空树，则插入节点是根节点，黑色
2. 如果存在，则更新该节点
3. 插入节点为红色
   1. 如果父节点为黑色，则正常插入
   2. 如果父节点为红色
      1. 叔叔节点为红色，则父节点和叔叔节点改为黑色，爷爷节点改成红色（向上递归）
      2. 叔叔节点为黑色or不存在，则调整二叉树结构结构，参考平衡二叉树来调整（左左，左右，右左，右右）



#### 关系型/非关系型数据库

https://www.zhihu.com/question/24225007

- 关系型
  - 建表实现
  - 优点：易于维护、使用方便、复杂操作
  - 缺点：读写性能差、灵活度欠缺、I/O瓶颈
- 非关系型
  - key-value、文档、列式、图像
  - 优点/缺点：和非关系型互补



#### c++20新特性

1. 增加了module特性，只需要编译一次




#### 内存池设计

**算法原理**：

1. 预申请一个内存区chunk，将内存中按照对象大小划分成多个内存块block
2. 维持一个空闲内存块链表，通过指针相连，标记头指针为第一个空闲块
3. 每次新申请一个对象的空间，则将该内存块从空闲链表中去除，更新空闲链表头指针
4. 每次释放一个对象的空间，则重新将该内存块加到空闲链表头
5. 如果一个内存区占满了，则新开辟一个内存区，维持一个内存区的链表，同指针相连，头指针指向最新的内存区，新的内存块从该区内重新划分和申请

https://zhuanlan.zhihu.com/p/64719710



